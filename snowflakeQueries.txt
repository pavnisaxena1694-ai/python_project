SELECT CURRENT_ROLE();

CREATE ROLE INGESTION_ROLE;

-- Allow role to use warehouse
GRANT USAGE ON WAREHOUSE COMPUTE_WH TO ROLE INGESTION_ROLE;

-- Allow role to use database
GRANT USAGE ON DATABASE PAVNISQL TO ROLE INGESTION_ROLE;

-- Allow role to use schema
GRANT USAGE ON SCHEMA PAVNISQL.PAVNISQL_SCHEMA TO ROLE INGESTION_ROLE;

-- Allow creating tables
GRANT CREATE TABLE ON SCHEMA PAVNISQL.PAVNISQL_SCHEMA TO ROLE INGESTION_ROLE;

-- Allow creating stage
GRANT CREATE STAGE ON SCHEMA PAVNISQL.PAVNISQL_SCHEMA TO ROLE INGESTION_ROLE;

-- Allow inserting data
GRANT INSERT ON ALL TABLES IN SCHEMA PAVNISQL.PAVNISQL_SCHEMA TO ROLE INGESTION_ROLE;

-- Future tables permission
GRANT INSERT ON FUTURE TABLES IN SCHEMA PAVNISQL.PAVNISQL_SCHEMA TO ROLE INGESTION_ROLE;

GRANT ROLE INGESTION_ROLE TO USER PAVNISAXENA;


